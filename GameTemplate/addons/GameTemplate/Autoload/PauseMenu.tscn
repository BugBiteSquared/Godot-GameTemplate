[gd_scene load_steps=3 format=3 uid="uid://d0f2vfcjommb5"]

[ext_resource type="PackedScene" path="res://addons/GameTemplate/GUI/Buttons/DefaultButton.tscn" id="1"]

[sub_resource type="GDScript" id="1"]
script/source = "extends CanvasLayer

var can_show: = false

@onready var resume: = find_child(\"Resume\")
@onready var restart: = find_child(\"Restart\")
@onready var options: = find_child(\"Options\")
@onready var mainmenu: = find_child(\"MainMenu\")
@onready var exit: = find_child(\"Exit\")

var MainMenu: = 'res://MainMenu/MainMenu.tscn'		# MainMenu scene when in levels

func _ready()->void:
  MenuEvent.paused = false
  
  #Localization
  SettingsLanguage.connect(\"ReTranslate\",Callable(self,\"retranslate\"))
  resume.connect(\"pressed\",Callable(self,\"_on_Resume_pressed\"))
  restart.connect(\"pressed\",Callable(self,\"_on_Restart_pressed\"))
  options.connect(\"pressed\",Callable(self,\"_on_Options_pressed\"))
  mainmenu.connect(\"pressed\",Callable(self,\"_on_MainMenu_pressed\"))
  exit.connect(\"pressed\",Callable(self,\"_on_Exit_pressed\"))
  retranslate()
  

func show_(value:bool)->void:
  if !can_show:
    return
  MenuEvent.paused = value
  $Control.visible = value
  if value:
    get_tree().get_nodes_in_group(\"Pause\")[0].grab_focus()


func _on_Resume_pressed()->void:
  Game.emit_signal(\"Resume\")
  show_(false)

func _on_Restart_pressed()->void:
  Game.emit_signal(\"Restart\")
  show_(false)

func _on_Options_pressed()->void:
  MenuEvent.options = true

func _on_MainMenu_pressed()->void:
  Game.emit_signal(\"ChangeScene\", MainMenu)
  show_(false)
  PauseMenu.can_show = false

func _on_Exit_pressed()->void:
  Game.emit_signal(\"Exit\")

func retranslate()->void:
  resume.text = tr(\"RESUME\")
  restart.text = tr(\"RESTART\")
  options.text = tr(\"OPTIONS\")
  mainmenu.text = tr(\"MAIN_MENU\")
  exit.text = tr(\"EXIT\")









"

[node name="PauseMenu" type="CanvasLayer"]
process_mode = 2
layer = 19
script = SubResource("1")

[node name="Control" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="Control"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Panel" type="Panel" parent="Control/MarginContainer"]
offset_right = 1152.0
offset_bottom = 648.0

[node name="MarginContainer" type="MarginContainer" parent="Control/MarginContainer/Panel"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="Control/MarginContainer/Panel/MarginContainer"]
offset_top = 238.0
offset_right = 1152.0
offset_bottom = 409.0
size_flags_vertical = 4

[node name="Resume" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" groups=["Pause"] instance=ExtResource("1")]
offset_right = 168.0
text = "Resume"

[node name="Restart" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" instance=ExtResource("1")]
offset_top = 20.0
offset_right = 168.0
offset_bottom = 39.0
text = "Restart"

[node name="Options" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" instance=ExtResource("1")]
offset_top = 40.0
offset_right = 168.0
offset_bottom = 59.0
text = "Options"

[node name="MainMenu" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" instance=ExtResource("1")]
offset_top = 60.0
offset_right = 168.0
offset_bottom = 79.0
text = "Main Menu"

[node name="Exit" parent="Control/MarginContainer/Panel/MarginContainer/VBoxContainer" instance=ExtResource("1")]
offset_top = 80.0
offset_right = 168.0
offset_bottom = 99.0
text = "Exit"
